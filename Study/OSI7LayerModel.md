# OSI 7 Layer Model
OSI(Open Systems Interconnection) 7 Layer Model
## 아직 완성안시킨 글입니다. 쓰다가 통신을 먼저 보고와야겠단 생각이 들어서 멈춥니다!

## 들어가기 전에...
OSI 7 계층 모델은 개발자라면 한번쯤 들어봤을 개념입니다. 저 또한 면접에서 이 질문을 받았었는데 대답하지 못해서 공부하게 되었어요. 이 모델을 찾고 이해하면서 깨달은게 많아 공유하고자 합니다.

### OSI 7 계층은 어디까지나 '모델'입니다.
OSI 7계층이 모든 통신이 지켜야 하는 규격 같은게 아니에요. 어디까지나 '모델'입니다. 이 모델로 역할을 나누어 생각하자. 뭐 이런 접근이자 패러다임, 그니까 철학입니다. OOP가 모든 프로그래밍언어에서 따르지 않는 것처럼요.

따라서 '모든 네트워킹이 이렇게 이루어진다'가 아닌 '이러한 철학이 있다'가 맞습니다. 그런데 우리가 인터넷으로 하는 통신중에 가장 많은 통신인 TCP/IP가 이러한 모델을 차용하고 있어서 꼭! 알아야 하는 모델이 되어버렸죠. 

실제로 통신을 위한 장비들이 이 모델을 그대로 따라하는게 아니라 느슨하게 따르고, 따라서 'n계층에 해당하는 장비와 프로토콜은 ~~입니다.'식의 접근은 부분적으로만 맞거나 넌센스입니다.

요즘 장비는 대부분 2~3개 계층의 역할을 한꺼번에 담당합니다. TCP/IP조차 오로지 4개의 계층을 가지고 있습니다..!

### 그러니까 역할을 나누는 개념만 이해하고 계층별 프로토콜이나 하드웨어/소프트웨를 달달 외우지 맙시다.
물론 저도 마지막에 정리를 하면서 프로토콜, 하드웨어의 예시를 쓰긴 썼는데, 어디까지나 예시로서 쓴 것일뿐 크게 의미두지 않으셨음 좋겠습니다. 설계하는 사람에 따라 다르게 쓰입니다.

## 탄생
1970년대 국제표준화기구와 국제전신자문위원회에서 따로 가지고 있던 네트워킹 모델이 있습니다. 그게 1983년에 합쳐지면서 지금의 OSI 7 Layer Model이 된겁니다.

## 계층별 기능
<!-- ![OSI7Layer](https://mblogthumb-phinf.pstatic.net/20130221_56/carrena_1361440089865dxb8A_GIF/osi.gif?type=w800) -->

### Layer 1: Physical
#### WIKI
물리 계층은 네트워크 하드웨어 전송 기술을 이룬다. 네트워크의 높은 수준 기능의 논리 데이터 구조를 기초로 하는 필수 계층이다. 다양한 특징의 하드웨어 기술이 접목되어 있기에 OSI 아키텍처에서 가장 복잡한 계층이다.

#### shlee0882님의 블로그
이 계층은 전기/기계/기능적 특성을 이용, 케이블로 데이터를 전송한다. 이 계층에서 사용되는 통신 단위는 **bit**이며 1과 0을 나타내는 전기적 ON/OFF상태이다.

이 계층에서는 단지 데이터를 전달만 할뿐 전송하려는 데이터가 무엇인지, 어떤 에러가 있는지 등에는 전혀 신경쓰지 않는다. 전기적신호로 데이터를 주고 받을 뿐이다.

이 계층에 속하는 대표적 장비는 **통신 케이블, 리피터, 허브**등이 있다.

#### JeGwan버전
물리 계층은 **전기적 on/off**로 0과 1을 나타내는 **비트단위로 통신**하는 층, **단순히 데이터를 주고 받을 뿐 내용에는 간섭하지 않는다.** 대표적으로 통신 케이블, 허브 등이 있다.

### Layer 2: Data Link
#### WIKI
데이터 링크 계층(Data link layer)은 포인트 투 포인트(Point to Point) 간 신뢰성있는 전송을 보장하기 위한 계층으로 **CRC(cyclic redundancy check, 순환 중복 검사:데이터 주기 전에 CRC값을 계산하고 준 후에 받은 CRC값을 비교해서 다르면 전송과정중에 오류가 있음을 알게 해줌!) 기반의 오류 제어와 흐름 제어가** 필요하다. 네트워크 위의 개체들 간 데이터를 전달하고, 물리 계층에서 발생할 수 있는 오류를 찾아 내고, 수정하는 데 필요한 기능적, 절차적 수단을 제공한다. **주소 값은 물리적으로 할당 받는데, 이는 네트워크 카드가 만들어질 때부터 맥 주소(MAC address)가 정해져 있다는 뜻**이다. 주소 체계는 계층이 없는 단일 구조이다. 데이터 링크 계층의 가장 잘 알려진 예는 **이더넷**이다. 이 외에도 HDLC나 ADCCP 같은 포인트 투 포인트(point-to-point) 프로토콜이나 패킷 스위칭 네트워크나 LLC, ALOHA 같은 근거리 네트워크용 프로토콜이 있다. 네트워크 브릿지나 스위치 등이 이 계층에서 동작하며, 직접 이어진 곳에만 연결할 수 있다.

#### shlee0882님의 블로그
물리계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할을 한다. 따라서 통신에서의 오류도 찾아주고 재전송도 하는 기능을 가지고 있는 것이다. 이 계층에서는 **MAC주소를 가지고 통신**하게 된다. 이 계층에서 전송되는 단위를 **프레임**이라 하고, 대표적인 장비로는 **브리지, 스위치** 등이 있다(여기서 MAC주소를 사용함).

#### CIO Korea
데이터 링크 레이어는 직접 연결된 두 Node 간 데이터 전송을 제공하며 physical 레이어의 오류 수정도 처리한다. 여기에는 2개의 sublayer도 존재한다. 하나는 매체 접근 제어(MAC) 레이어고 다른 하나는 논리적 연결 제어(LLC)레이어이다. 네트워킹 세계에서 대부분 스위치는 여기서 작동한다.

#### JeGwan버전
데이터링크 계층은 물리 계층에서 단순히 주고 받던 데이터의 **무결성을 체크**한다. **CRC(순환중복검사)**를 통해서 보낸 비트들을 비트연산을 통해 고유 CRC값을 뽑아내고 보냈을 때의 값과 리시버가 응답한 CRC값과의 비교를 통해 무결성을 체크한다(만약 손상되었다면 재전송한다). 통신은 기기의 고유 주소이자 식별자인 **MAC주소**<sup>*</sup>를 사용하며 대표적으로 이더넷, 브리지, 스위치가 있다. 

*MAC주소(Media Access Control Address) : 데이터링크계층에서 통신을 위한 네트워크 인터페이스에 할당된 고유 식별자이다. 생산시에 고유식별자를 생산자가 할당하고 하드웨어에 저장한다. 다시 말해서 모든 네트워크 인터페이스 기기들은 생산 당시부터 자기 MAC주소를 가지고 있다. IEEE의 규정을 따르는 표준 MAC주소는 48비트로 구성되어있으며 이 중 첫 24비트가 제조업체의 식별코드이다. 나머지 24비트는 기기정보를 담고있다. 2<sup>48</sup>개의 주소를 가지고 있기 때문에 충분히 많은 숫자지만, 같은 MAC주소를 가진 기기도 있을 수 있다. 그럴 경우 같은 라우터에 연결되어있지만 않으면 상관없다. 한 네트워크 내에서 기기들은 라우터와만 통신하고 라우터가 바깥 네트워크와 직접 통신하기 때문에 라우터외부의 기기의 MAC주소가 같아도 상관은 없다. local내에서만 쓰는 식별자이기 때문이다.

### Layer 3: Network
#### WIKI
네트워크 계층(Network layer)은 여러개의 노드를 거칠때마다 경로를 찾아주는 역할을 하는 계층으로 다양한 길이의 데이터를 네트워크들을 통해 전달하고, 그 과정에서 전송 계층이 요구하는 서비스 품질(QoS)을 제공하기 위한 기능적, 절차적 수단을 제공한다. 네트워크 계층은 라우팅, 흐름 제어, 세그멘테이션(segmentation/desegmentation), 오류 제어, 인터네트워킹(Internetworking) 등을 수행한다. 라우터가 이 계층에서 동작하고 이 계층에서 동작하는 스위치도 있다. 데이터를 연결하는 다른 네트워크를 통해 전달함으로써 인터넷이 가능하게 만드는 계층이다. 논리적인 주소 구조(IP), 곧 네트워크 관리자가 직접 주소를 할당하는 구조를 가지며, 계층적(hierarchical)이다.

서브네트의 최상위 계층으로 경로를 설정하고, 청구 정보를 관리한다. 개방형 시스템들의 사이에서 네트워크 연결을 설정, 유지, 해제하는 기능을 부여하고, 전송 계층 사이에 네트워크 서비스 데이터 유닛(NSDU : Network Service Data Unit)을 교환하는 기능을 제공한다.

#### CIO Korea
네트워킹 전문가 대부분이 관심을 두고 좋아하는 라우터 기능 대부분이 여기에 자리잡는다. 가장 기본적으로 볼 때 이 레이어는 다른 여러 라우터를 통한 라우팅을 비롯한 패킷 전달을 담당한다.

#### shlee0882님의 블로그
이 계층에서 가장 중요한 기능은 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능(라우팅)이다.
여기에 사용되는 프로토콜의 종류도 다양하고, 라우팅하는 기술도 다양.

이 계층은 경로를 선택하고 주소를 정하고 경로에 따라 패킷을 전달해주는 것이 이 계층의 역할이다.
이 계층의 대표적인 장비는 라우터이며 2계층의 장비중 하나인 '스위치'에 라우팅 기능을 장착한 L3 스위치가 있다. 여기서는 IP주소를 사용한다. 

#### Oracle
논리적 주소에서 실제 주소로 변환하는 것을 포함하여 메시지 라우팅을 수행. 인터넷 프로토콜(IP)은 SPARC 시스템을 위한 일반적인 네트워크 계층이다.

#### JeGwan버전
네트워크 계층은 한마디로 **인터넷에 연결해주는 계층**, **라우터**이다. 로컬 네트워크에서 인터넷으로 연결해서 데이터를 송수신 하기 위해 주소가 필요한데 이때 쓰는 것이 **인터넷 프로토콜(IP)** 이다. 네트워크 계층은 **주소를 부여(IP)하고 경로를 설정(Routing)하는 역할**이다.

### Layer 4: Transport
#### CIO Korea
트랜스포트 계층은 최종 시스템 및 호스트 간의 데이터 전송 조율을 담당한다. 보낼 데이터의 용량과 속도, 목적지 등을 처리한다. 트랜스포트 계층의 예 중에서 가장 잘 알려진 것이 TCP이다. TCP()는 IP(Internet Protocol)위에 구축되는 흔히 TCP/IP로 알려져있다. 기기의 IP주소가 여기서 작동한다.

#### WIKI
전송 계층(Transport layer)은 양 끝단(End to end)의 사용자들이 신뢰성있는 데이터를 주고 받을 수 있도록 해 주어, 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 해준다. 시퀀스 넘버 기반의 오류 제어 방식을 사용한다. 전송 계층은 특정 연결의 유효성을 제어하고, 일부 프로토콜은 상태 개념이 있고(stateful), 연결 기반(connection oriented)이다. 이는 전송 계층이 패킷들의 전송이 유효한지 확인하고 전송 실패한 패킷들을 다시 전송한다는 것을 뜻한다. 가장 잘 알려진 전송 계층의 예는 TCP이다.

종단간(end-to-end) 통신을 다루는 최하위 계층으로 종단간 신뢰성 있고 효율적인 데이터를 전송하며, 기능은 오류검출 및 복구와 흐름제어, 중복검사 등을 수행한다.


#### Oracle
네트워크상의 데이터 흐름을 제어한다. TCP, UDP를 사용한다.

#### shlee0882님의 블로그


### Layer 5: Session
#### CIO Korea
2대의 기기, 클라이언트 또는 서버 간에 통신이 필요하면 세션을 만들어야 하는데 이 작업이 여기서 처리된다. 이 계층에는 설정, 조율, 세션 마지막에 애플리케이션 간의 종료 등의 기능이 필요하다. 그래서 구체적으로 뭐?

### Layer 6: Presentation
#### CIO Korea
어플리케이션 레이어의 데이터 표현에서 독립적인 부분을 나타낸다. ???
일반적으로 애플리케이션 형식을 준비 또는 네트워크 형식으로 변환하거나 네트워크 형식을 애플리케이션 형식으로 변환하는 것을 나타낸다. 다시 말해 이 계층은 애플리케이션이나 네트워크를 위해 데이터를 컴파일? 표현? 해주는 것이다. 대표적인 예로는 데이터를 안전하게 전송하기위해 암복호화 하는 것이다.(아마도 https?)

### Layer 7: Application
#### CIO Korea
애플리케이션 레이어는 제일 위에 있다. 사용자에게 보이는 부분이다. 엔드유저에게 가장 가까운 레이어. 구글 크롬, 오피스 등 OS위의 프로그램들이 대표적이다.

## 유투브 강의
출처 : https://www.youtube.com/watch?v=7zeiHfRB8SM

데이터를 보내기 전에 약속 또는 절차를 거쳐서 데이터를 다른 컴퓨터에게 보낸다. 예를 들어 택배회사에 물건을 전달할 때, 규격에 맞는 상자가 아니면 받아주지 않는다고 생각해보자. 통신도 똑같다.

데이터는 안전하고(왜곡되지 않아야 하며 일부가 손실되어도 받는 쪽에서 알아야 한다), 신속하고, 정확하게 전달되어야 한다. 이를 위해 어떠한 약속을 통해 데이터를 규격화하기로 했다. 이 약속을 Protocol이라 한다. 대표적인 프로토콜이 IP(Internet Protocol)다.

컴퓨터는 OSI 7 Layer를 거치면서 데이터를 규칙화하고 포맷화한다. 받는 쪽에서는 해석하는 방법이 필요하며 보내는 쪽에서는 포장하는 방법이 필요하다.

데이터가 케이블로 전달될 때는 최종적으로 on off의 전기적 상태를 가진다. 이것을 컴퓨터에서 0,1로 표현하고 이 단위를 bit라 한다. 우리가 다루는 어떤 데이터도 최종적으로는 0과 1의 전기적 신호라는 물리적형태를 가진다.

## Summary Table
|Layer Name|HW/SW|Protocol|Role|
|-|-|-|-|
|Layer1 Physical|허브,케이블|On/Off bit|데이터를 0(OFF)과 1(ON)의 전기적 신호로 로 전송만함
|Layer2 Data Link|스위치,브리지|MAC|데이터의 무결성을 순환반복검사를 통해 체크, MAC주소를 사용해 통신 
|Layer3 Network|라우터|IP|인터넷으로의 연결을 담당. 주소를 부여(IP)하고 경로를 설정(Routing), 데이터를 대상IP에게 패킷형태로 보낸다. 

## 찾으면서 느낀 것
- OSI 7 계층 모델은 네트워크관련자격증을 딸 때 필요하다.
- 암기하기 위한 문장들이 있다 ㅋㅋㅋ (APSTNDP, All-People-Seem-To-Need-Data-Processing)

https://shlee0882.tistory.com/110  
https://docs.oracle.com/cd/E19455-01/806-1017/6jab5di2d/index.html